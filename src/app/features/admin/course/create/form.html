<div class="dashboard-header">
  <h2>{{ mode === 'create' ? 'Tambah Matakuliah' : 'Edit Matakuliah' }}</h2>
  <p>{{ mode === 'create' ? 'Buat matakuliah baru untuk kurikulum' : 'Perbarui data matakuliah yang sudah ada' }}</p>
</div>

<section class="form-section">
  <form
    #nameCodeForm="ngForm"
    (ngSubmit)="onNameCodeSubmit(nameCodeForm)"
    novalidate>

    <div class="form-group">
      <label for="name" class="form-label">
        Nama Matakuliah <span class="required">*</span>
      </label>

      <div class="input-group">
        <input
          id="name"
          type="text"
          class="form-input"
          name="name"
          [(ngModel)]="formData.name"
          required
          minlength="2"
          #name="ngModel"
          [class.error]="name.invalid && (name.dirty || nameCodeForm.submitted)"
          placeholder="Contoh: Pemrograman Web">
      </div>

      <div class="error-message" *ngIf="name.invalid && (name.dirty || nameCodeForm.submitted)">
        <span *ngIf="name.errors?.['required']">Nama matakuliah wajib diisi.</span>
        <span *ngIf="name.errors?.['minlength']">Minimal 2 karakter.</span>
      </div>
    </div>

    <div class="form-group">
      <label for="code" class="form-label">
        Kode Matakuliah <span class="required">*</span>
      </label>

      <div class="input-group">
        <input
          id="code"
          type="text"
          class="form-input"
          name="code"
          [(ngModel)]="formData.code"
          required
          minlength="3"
          #code="ngModel"
          [class.error]="code.invalid && (code.dirty || nameCodeForm.submitted)"
          placeholder="Contoh: TIF-101">
      </div>

      <div class="error-message" *ngIf="code.invalid && (code.dirty || nameCodeForm.submitted)">
        <span *ngIf="code.errors?.['required']">Kode matakuliah wajib diisi.</span>
        <span *ngIf="code.errors?.['minlength']">Minimal 3 karakter.</span>
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="btn-secondary"
        (click)="mode === 'create' ? resetForm() : back()"
        [disabled]="isLoading">
        {{ mode === 'create' ? 'Bersihkan' : 'Batal' }}
      </button>

      <button
        type="submit"
        class="btn-add"
        [disabled]="nameCodeForm.invalid || isLoading">
        {{ isLoading ? 'Menyimpan...' : (mode === 'create' ? 'Simpan Data' : 'Simpan Perubahan') }}
      </button>
    </div>

  </form>
</section>

<div class="toast-popup"
     [class.show]="toastState.show"
     [class.error]="toastState.type === 'error'">
  {{ toastState.message }}
</div>
