<div class="dashboard-header">
  <h2>Tambah Matakuliah Mahasiswa</h2>
  <p>Tambahkan matakuliah ke KRS mahasiswa: <strong>{{ name }}</strong></p>
</div>

<section class="form-section">
  <form
    #enrollForm="ngForm"
    (ngSubmit)="onSubmit(enrollForm)"
    novalidate>

    <div class="form-group">
      <label for="courseId" class="form-label">
        Pilih Mata Kuliah <span class="required">*</span>
      </label>

      <div class="input-group">
        <select
          id="courseId"
          class="form-input"
          name="courseId"
          [(ngModel)]="selectedCourseId"
          required
          #courseSelect="ngModel"
          [class.error]="courseSelect.invalid && (courseSelect.dirty || enrollForm.submitted)">

          <option [ngValue]="null" disabled>-- Pilih Mata Kuliah --</option>
          <option *ngFor="let c of courses" [ngValue]="c.id">
            {{ c.name }} ({{ c.code }})
          </option>
        </select>
      </div>

      <div class="error-message" *ngIf="courseSelect.invalid && (courseSelect.dirty || enrollForm.submitted)">
        Mata kuliah wajib dipilih.
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="btn-secondary"
        (click)="back()"
        [disabled]="isLoading">
        Batal
      </button>

      <button
        type="submit"
        class="btn-add"
        [disabled]="enrollForm.invalid || isLoading">
        {{ isLoading ? 'Menambahkan...' : 'Tambah ke KRS' }}
      </button>
    </div>

  </form>
</section>

<div class="toast-popup"
     [class.show]="toastState.show"
     [class.error]="toastState.type === 'error'">
  {{ toastState.message }}
</div>
