<div class="dashboard-header">
  <h2>Manajemen Sesi Kelas</h2>
  <p>Atur jadwal perkuliahan dan generate QR Code</p>
</div>

<div class="page-actions">
  <button class="btn-add" (click)="createClassSession()">+ Tambah Sesi Kelas</button>
</div>

<app-shared-table
  [data]="classSessions"
  [columns]="tableColumns"
  [loading]="loading">

  <ng-template #actionTemplate let-item>
    <div class="actions">
      <button class="btn btn-edit" (click)="editClassSession(item)" title="Edit Sesi">
        Edit
      </button>

      <button class="btn btn-download" (click)="downloadQR(item)" title="Download QR Code">
        ğŸ“¥ QR
      </button>

      <button class="btn btn-delete" (click)="deleteClassSession(item)" title="Hapus Sesi">
        Hapus
      </button>
    </div>
  </ng-template>
</app-shared-table>

<div class="delete-modal-overlay" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
  <div class="delete-modal" (click)="$event.stopPropagation()">

    <div class="delete-modal-header">
      <h3>Hapus Sesi Kelas?</h3>
    </div>

    <div class="delete-modal-body">
      <p>
        Anda akan menghapus sesi:<br>
        <strong>{{ selectedClassSession?.course?.name }}</strong><br>
        <span class="text-muted">({{ selectedClassSession?.timeRange }})</span>
      </p>
      <span class="delete-warning">âš ï¸ Data absensi terkait mungkin akan hilang.</span>
    </div>

    <div class="delete-modal-actions">
      <button class="btn btn-secondary" (click)="closeDeleteModal()" [disabled]="deleteLoading">
        Batal
      </button>
      <button class="btn btn-delete" (click)="confirmDelete()" [disabled]="deleteLoading">
        {{ deleteLoading ? 'Menghapus...' : 'Ya, Hapus' }}
      </button>
    </div>

  </div>
</div>

<div class="toast-popup"
     [class.show]="toastState.show"
     [class.error]="toastState.type === 'error'">
  {{ toastState.message }}
</div>
