<div class="dashboard-header">
  <h2>{{ mode === 'create' ? 'Tambah Sesi Kelas' : 'Edit Sesi Kelas' }}</h2>
</div>

<section class="profile-section">
  <form #sessionForm="ngForm" class="name-code-form" (ngSubmit)="onNameCodeSubmit(sessionForm)">

    <div class="form-side-container">
      <div class="form-group">
        <label class="form-label">Mata Kuliah</label>
        <select class="form-input" name="courseId" [(ngModel)]="formData.courseId" required>
          <option [ngValue]="null" disabled>Pilih Mata Kuliah</option>
          <option *ngFor="let c of courses" [ngValue]="c.id">{{ c.name }}</option>
        </select>
      </div>

      <div class="input-row">
        <div class="form-group flex-1">
          <label class="form-label">Waktu Mulai</label>
          <input type="datetime-local" class="form-input" name="startTime" [(ngModel)]="formData.startTime" required>
        </div>
        <div class="form-group flex-1">
          <label class="form-label">Waktu Selesai</label>
          <input type="datetime-local" class="form-input" name="endTime" [(ngModel)]="formData.endTime" required>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Dosen Pengajar</label>
        <input type="text" class="form-input" name="lecturer" placeholder="Nama Dosen..." [(ngModel)]="formData.lecturer" required>
      </div>

      <div class="form-group">
        <label class="form-label">Ruangan / Tempat</label>
        <input type="text" class="form-input" name="place" placeholder="Contoh: Lab Komputer 1" [(ngModel)]="formData.place" required>
      </div>
    </div>

    <div class="form-side-container">
      <div class="form-group">
        <label class="form-label">Titik Koordinat Presensi</label>

        <div class="location-action-card">
          <p class="location-info">Sistem akan mengambil koordinat GPS perangkat Anda secara otomatis untuk validasi presensi.</p>
          <button type="button" class="btn-gps-large" (click)="getCurrentLocation()">
            üìç Ambil Lokasi Saat Ini
          </button>
        </div>

        <div class="coord-display-v2">
          <div class="coord-item">
            <span class="label">Latitude</span>
            <span class="value">{{ formData.latitude || '0.000000' }}</span>
            <input type="hidden" name="lat" [(ngModel)]="formData.latitude" required>
          </div>
          <div class="coord-item">
            <span class="label">Longitude</span>
            <span class="value">{{ formData.longitude || '0.000000' }}</span>
            <input type="hidden" name="lng" [(ngModel)]="formData.longitude" required>
          </div>
        </div>
      </div>

      <div class="form-actions-v2">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="mode === 'create' ? resetForm() : back()">
          {{ mode === 'create' ? 'Bersihkan' : 'Batal' }}
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="sessionForm.invalid">
          {{ mode === 'create' ? 'Simpan Sesi' : 'Perbaharui Sesi'}}
        </button>
      </div>
    </div>

  </form>
</section>
