<div class="sidebar" [class.collapsed]="isCollapsed()">

  <div class="sidebar-header">
    <div class="header-content">
      <div class="sidebar-title" *ngIf="!isCollapsed()">AuraTrack</div>
      <div class="sidebar-logo-mini" *ngIf="isCollapsed()">AT</div>
    </div>
    <button class="toggle-sidebar" (click)="toggleSidebar()" aria-label="Toggle Navigation">
      â˜°
    </button>
  </div>

  <ng-container *ngIf="user() as currentUser">

    <div class="user-card" *ngIf="!isCollapsed()">
      <div class="user-avatar-lg">ğŸ‘¤</div>

      <ng-container *ngIf="currentUser.role === 'STUDENT'">
        <div class="user-name">{{ currentUser.name }}</div>
        <div class="user-nim">{{ displayName }}</div>
      </ng-container>

      <div class="user-program">
        {{ currentUser.role === 'STUDENT' ? currentUser.major : 'ADMINISTRATOR' }}
      </div>
    </div>

    <ul class="nav-menu">
      <li class="nav-item">
        <button
          class="nav-link"
          [class.active]="isRouteActive('dashboard')"
          (click)="navigateTo('dashboard', 'Dashboard')"
          title="Dashboard">
          <span class="nav-icon">ğŸ“Š</span>
          <span class="nav-text" *ngIf="!isCollapsed()">Dashboard</span>
        </button>
      </li>

      <li class="nav-item">
        <button
          class="nav-link"
          [class.active]="isRouteActive('course')"
          (click)="navigateTo('course', 'Matakuliah')"
          title="Matakuliah">
          <span class="nav-icon">ğŸ“š</span>
          <span class="nav-text" *ngIf="!isCollapsed()">Matakuliah</span>
        </button>
      </li>

      <ng-container *ngIf="currentUser.role === 'ADMIN'">
        <li class="nav-item">
          <button
            class="nav-link"
            [class.active]="isRouteActive('class-session')"
            (click)="navigateTo('class-session', 'Sesi Kelas')"
            title="Sesi Kelas">
            <span class="nav-icon">ğŸ‘¨â€ğŸ«</span>
            <span class="nav-text" *ngIf="!isCollapsed()">Sesi Kelas</span>
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            [class.active]="isRouteActive('student')"
            (click)="navigateTo('student', 'Mahasiswa')"
            title="Mahasiswa">
            <span class="nav-icon">ğŸ‘¨</span>
            <span class="nav-text" *ngIf="!isCollapsed()">Mahasiswa</span>
          </button>
        </li>
      </ng-container>

      <li class="nav-item">
        <button
          class="nav-link"
          [class.active]="isRouteActive('profile')"
          (click)="navigateTo('profile', 'Setting')"
          title="Setting">
          <span class="nav-icon">ğŸ”</span>
          <span class="nav-text" *ngIf="!isCollapsed()">Setting</span>
        </button>
      </li>
    </ul>
  </ng-container>

  <div class="logout-link">
    <button class="nav-link logout-btn" (click)="logout()" title="Logout">
      <span class="nav-icon">ğŸšª</span>
      <span class="nav-text" *ngIf="!isCollapsed()">Logout</span>
    </button>
  </div>
</div>
